<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Islamic Dhikr Counter</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap');
    body {
        background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
        color: white;
        font-family: Arial, sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        min-height: 100vh;
        margin: 0;
        padding: 15px;
    }
    h1 {
        margin-bottom: 20px;
        text-shadow: 2px 2px 5px black;
        font-size: clamp(28px, 5vw, 60px);
        text-align: center;
        color: #00ff99;
    }
    .logo {max-width: 180px; height: auto; margin-bottom: 10px; cursor: pointer;}
    .counter-box {
        display: inline-block;
        background-color: #111;
        border-radius: 25px;
        padding: 25px;
        border: 4px solid #444;
        box-shadow: 0 0 20px rgba(0,0,0,0.8), inset 0 0 15px #000;
        width: min(360px, 95%);
        text-align: center;
        margin-bottom: 20px;
    }
    .label-row {display: flex; justify-content: space-between; font-size: 14px; margin-bottom: 5px; letter-spacing: 1px;}
    .display {
        background-color: #222;
        color: #00FFCC;
        font-family: 'Orbitron', monospace;
        font-size: 42px;
        padding: 10px;
        border-radius: 8px;
        margin-bottom: 15px;
        box-shadow: inset 0 0 12px #000;
        border: 2px solid #555;
    }
    .buttons {display: flex; justify-content: space-around; margin-top: 10px;}
    .btn {
        background: radial-gradient(circle at 30% 30%, silver, #777);
        border: none;
        border-radius: 50%;
        width: 65px;
        height: 65px;
        font-size: 18px;
        cursor: pointer;
        box-shadow: 0 5px #333;
        transition: all 0.2s ease;
    }
    .btn:active {box-shadow: 0 2px #222; transform: translateY(3px);}
    .timer {margin-top: 10px; font-size: 18px; color: yellow; text-shadow: 1px 1px 3px black;}
    select {
        padding: 12px; font-size: 16px; margin-top: 20px; border-radius: 8px; border: none;
        width: 320px; text-align: center; background-color: #fff; color: black; font-weight: bold;
        box-shadow: 0 5px 10px rgba(0,0,0,0.3);
    }
    .controls {margin-top: 20px; display: flex; flex-wrap: wrap; justify-content: center; gap: 10px;}
    .control-btn {
        background-color: #00d4a6; border: none; padding: 10px 18px; border-radius: 8px; font-size: 14px;
        color: black; cursor: pointer; box-shadow: 0 4px rgba(0,0,0,0.3); transition: background 0.2s ease;
    }
    .control-btn:hover {background-color: #00b88c;}
    .speed-box {background-color: gold; color: black; font-weight: bold; padding: 6px 14px; border-radius: 6px; margin-top: 10px; cursor: pointer; user-select: none;}
    .dua-title {font-size: 16px; margin-top: 8px; color: #cfe; min-height: 40px;}
</style>
</head>
<body>

<!-- Logo Section -->
<div style="text-align: center; margin-bottom: 20px;">
    <a href="" title="Refresh Page">
        <img src="1f2fea6d-171c-4590-a168-c05ab7f23694.png" alt="Islamic Dhikr Logo" class="logo">
    </a>
    <h1>Islamic Dhikr Counter</h1>
</div>

<div class="counter-box">
    <div class="label-row"><span>TALLY COUNTER</span><span id="statusLabel">Ready</span></div>
    <div class="dua-title" id="duaTitle">Select a dua below‚Ä¶</div>
    <div class="display" id="counter">0 / 33</div>
    <div class="label-row"><span>COUNT</span><span>RESET</span></div>
    <div class="buttons">
        <button class="btn" onclick="increment()">+</button>
        <button class="btn" onclick="resetAll()">‚ü≤</button>
    </div>
    <div class="timer" id="timer">00:00</div>
</div>

<div class="controls">
    <button class="control-btn" onclick="startCounting()">‚ñ∂ Start</button>
    <button class="control-btn" onclick="pauseCounting()">‚è∏ Pause</button>
    <button class="control-btn" onclick="resumeCounting()">‚èØ Resume</button>
    <button class="control-btn" onclick="prevDua()">‚üµ Prev</button>
    <button class="control-btn" onclick="nextDua()">Next ‚ü∂</button>
    <button class="control-btn" onclick="toggleNightMode()">üåô Night Mode</button>
    <button class="control-btn" onclick="toggleAutoPlay()">üîÅ Auto Play</button>
</div>

<div class="speed-box" id="speedBox">Speed: 1.0√ó</div>

<!-- Custom Target Input -->
<div style="margin-top:15px; text-align:center;">
  <label for="customTarget" style="font-size:14px; color:#cfe;">Custom Target:</label><br>
  <input type="number" id="customTarget" value="33" min="1" 
         onchange="setCustomTarget()" 
         style="padding:8px; font-size:16px; width:120px; text-align:center; border-radius:6px;">
</div>

<!-- Dua List -->
<select id="duaList">
    <option value="SubhanAllah">SubhanAllah</option>
    <option value="Alhamdulillah">Alhamdulillah</option>
    <option value="Allahu Akbar">Allahu Akbar</option>
    <option value="La ilaha illallah">La ilaha illallah</option>
    <option value="La hawla wala quwwata illa billah">La hawla wala quwwata illa billah</option>
    <option value="La ilaha illallah, wahdahu la sharika lah, lahul-mulk, lahul-hamd, yuhyi wa yumit, wa huwa 'ala kulli shay‚Äôin qadir">La ilaha illallah, wahdahu la sharika lah‚Ä¶</option>
    <option value="Astaghfirullah wa atubu ilayh">Astaghfirullah wa atubu ilayh</option>
    <option value="Hasbunallahu wa ni'mal wakeel">Hasbunallahu wa ni'mal wakeel</option>
    <option value="La ilaha illa Anta, Subhanaka inni kuntu minaz-zalimeen">La ilaha illa Anta‚Ä¶</option>
    <option value="Allahu Akbar (34)">Allahu Akbar (34)</option>
    <option value="La ilaha illallah (33)">La ilaha illallah (33)</option>
    <option value="La Hawla Wala Quwwata illa Billah (99)">La Hawla‚Ä¶ (99)</option>
    <option value="Ayatul- Kursi">Ayatul- Kursi</option>
    <option value="Surah Ikhlaas">Surah Ikhlaas</option>
    <option value="Surah Falaq">Surah Falaq</option>
    <option value="Surah Naas (3 times)">Surah Naas (3 times)</option>
    <option value="Hasbiyallahu Laa Ilaaha illa Huwa alayhi tawakkaltu Wa Huwa Rabbul Arshil Azeem (7 times)">Hasbiyallahu‚Ä¶ (7)</option>
    <option value="Subhanallahi wa bihamdhihi (100 times)">Subhanallahi wa bihamdhihi (100)</option>
    <option value="Astagfirullahi wa atoobu ilayhi (100 times)">Astaghfirullahi‚Ä¶ (100)</option>
    <option value="Allahumma salli wa sallim ala nabiyyina Muhammad (10 times)">Allahumma salli‚Ä¶ (10)</option>
    <option value="Astaghfirullah (3000)">Astaghfirullah (3000)</option>
    <option value="Surah Naas (3)">Surah Naas (3)</option>
    <option value="Surah Falaq (3)">Surah Falaq (3)</option>
    <option value="Surah Ikhlaas (3)">Surah Ikhlaas (3)</option>
    <option value="Allahumma inni As'aluka Min Fadlika wa Rahmatika (99)">Allahumma inni As'aluka‚Ä¶ (99)</option>
    <option value="Allahumma Rabbana ajirna min khizyid-dunya wal-akhirah (99)">Allahumma Rabbana‚Ä¶ (99)</option>
    <option value="Allahumma ajirni minan naar (99)">Allahumma ajirni minan naar (99)</option>
    <option value="Allahumma inni asalukal Jannah (99)">Allahumma inni asalukal Jannah (99)</option>
    <option value="La ilaha illa anta subhanaka inni kuntu minaz-zalimin (99)">La ilaha illa anta‚Ä¶ (99)</option>
    <option value="Allahumma inni as'aluka husnal khatimah (99)">Allahumma inni as'aluka husnal khatimah (99)</option>
    <option value="Allahumma inni asaluka al Jannah (99)">Allahumma inni asaluka al Jannah (99)</option>
    <option value="Allahumma ajirni minan naar 2 (99)">Allahumma ajirni minan naar 2 (99)</option>
    <option value="Allahumma inni asaluka al afiyah (99)">Allahumma inni asaluka al afiyah (99)</option>
    <option value="Allahumma inni asaluka al akhirah (99)">Allahumma inni asaluka al akhirah (99)</option>
    <option value="Allahumma inni asaluka al afwa wal afiyah (99)">Allahumma inni asaluka al afwa wal afiyah (99)</option>
    <option value="Allahumma innaka afuwwun tuhibbul afwa fa fu anni (99)">Allahumma innaka afuwwun‚Ä¶ (99)</option>
    <option value="Allahumma auzubika min azaabil qabr (99)">Allahumma auzubika min azaabil qabr (99)</option>
</select>

<script>
let count = 0, target = 33, timerInterval, totalSeconds = 0, countingInterval;
let autoPlay = false;

// DOM
const duaList = document.getElementById("duaList");
const counterEl = document.getElementById("counter");
const timerEl = document.getElementById("timer");
const titleEl = document.getElementById("duaTitle");
const statusEl = document.getElementById("statusLabel");
const speedBox = document.getElementById("speedBox");
const customTargetInput = document.getElementById("customTarget");

// --- Speed steps (0.1 to 3.0) ---
const speedSteps = Array.from({length: 30}, (_, i) => (0.1 * (i+1)).toFixed(1));
let speedIndex = 9; // default = 1.0
let speed = parseFloat(speedSteps[speedIndex]);

// INIT
window.addEventListener('DOMContentLoaded', () => {applySelection(); updateCounter();});

// Dua selection
duaList.addEventListener("change", () => {
    applySelection();
    resetAll();
    customTargetInput.value = target;
});

function parseTargetFromText(text) {
    const m = text.match(/\((\d+)/);
    if (m) return parseInt(m[1], 10);
    return 33;
}
function applySelection() {
    const txt = duaList.options[duaList.selectedIndex].text.trim();
    titleEl.textContent = txt;
    target = parseTargetFromText(txt);
    updateCounter();
    customTargetInput.value = target;
}

// Counter
function updateCounter(){counterEl.textContent = `${count} / ${target}`;}
function increment(){
    if(count<target){
        count++;
        updateCounter();
        if(count===1&&totalSeconds===0) startTimer();
    }
    if(count>=target){
        clearInterval(countingInterval);
        statusEl.textContent="Completed";
        if(autoPlay) setTimeout(()=>{advanceToNextDua();},400);
    }
}
function resetAll(){count=0;updateCounter();resetTimer();clearInterval(countingInterval);statusEl.textContent="Ready";}
function startTimer(){totalSeconds=0;clearInterval(timerInterval);timerInterval=setInterval(updateTimer,1000);}
function pauseTimer(){clearInterval(timerInterval);}
function resumeTimer(){timerInterval=setInterval(updateTimer,1000);}
function resetTimer(){clearInterval(timerInterval);timerEl.textContent="00:00";}
function updateTimer(){totalSeconds++;let m=String(Math.floor(totalSeconds/60)).padStart(2,'0');let s=String(totalSeconds%60).padStart(2,'0');timerEl.textContent=`${m}:${s}`;}

// Speed control
speedBox.addEventListener("click",()=>{
    speedIndex=(speedIndex+1)%speedSteps.length;
    speed=parseFloat(speedSteps[speedIndex]);
    speedBox.innerText=`Speed: ${speed}√ó`;
    if(countingInterval) restartCounting();
});

// Controls
function toggleNightMode(){document.body.style.background=document.body.style.background.includes('black')?'linear-gradient(135deg,#0f2027,#203a43,#2c5364)':'black';}
function startCounting(){resetAll();startTimer();statusEl.textContent="Counting‚Ä¶";countingInterval=setInterval(increment,1000/speed);}
function pauseCounting(){clearInterval(countingInterval);pauseTimer();statusEl.textContent="Paused";}
function resumeCounting(){countingInterval=setInterval(increment,1000/speed);resumeTimer();statusEl.textContent="Counting‚Ä¶";}
function restartCounting(){clearInterval(countingInterval);countingInterval=setInterval(increment,1000/speed);}
function toggleAutoPlay(){autoPlay=!autoPlay;statusEl.textContent=autoPlay?"Autoplay ON":"Autoplay OFF";if(autoPlay&&count<target){restartCounting();}else if(!autoPlay){clearInterval(countingInterval);}}
function nextDua(){advanceToNextDua();}
function prevDua(){if(duaList.selectedIndex>0){duaList.selectedIndex-=1;applySelection();resetAll();}}
function advanceToNextDua(){if(duaList.selectedIndex<duaList.options.length-1){duaList.selectedIndex+=1;applySelection();resetAll();if(autoPlay){startCounting();}}else{autoPlay=false;statusEl.textContent="All duas completed";}}

// Custom Target
function setCustomTarget() {
    const val = parseInt(customTargetInput.value, 10);
    if (!isNaN(val) && val > 0) {
        target = val;
        updateCounter();
    }
}
</script>
</body>
</html>
